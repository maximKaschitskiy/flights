[{"C:\\Users\\Maxim\\Desktop\\GitHub\\flights\\src\\index.js":"1","C:\\Users\\Maxim\\Desktop\\GitHub\\flights\\src\\App.js":"2","C:\\Users\\Maxim\\Desktop\\GitHub\\flights\\src\\reportWebVitals.js":"3","C:\\Users\\Maxim\\Desktop\\GitHub\\flights\\src\\SearchPanel\\SearchPanel.js":"4","C:\\Users\\Maxim\\Desktop\\GitHub\\flights\\src\\SearchResult\\SearchResult.js":"5"},{"size":535,"mtime":1652738902818,"results":"6","hashOfConfig":"7"},{"size":4977,"mtime":1674317601227,"results":"8","hashOfConfig":"7"},{"size":362,"mtime":1652738903018,"results":"9","hashOfConfig":"7"},{"size":4424,"mtime":1674330859912,"results":"10","hashOfConfig":"7"},{"size":9797,"mtime":1674473846361,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","suppressedMessages":"14","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"edz2jh",{"filePath":"15","messages":"16","suppressedMessages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"18"},{"filePath":"19","messages":"20","suppressedMessages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"22","messages":"23","suppressedMessages":"24","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"25","messages":"26","suppressedMessages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Maxim\\Desktop\\GitHub\\flights\\src\\index.js",[],[],"C:\\Users\\Maxim\\Desktop\\GitHub\\flights\\src\\App.js",["28","29","30"],[],"import React from \"react\";\n\nimport \"./vendor/normalize.css\";\nimport \"./vendor/fonts/fonts.css\";\nimport \"./App.css\";\n\nimport flightsMock from \"./const/flights.json\";\n\nimport SearchPanel from \"./SearchPanel/SearchPanel\";\nimport SearchResult from \"./SearchResult/SearchResult\";\n\nfunction App() {\n\n  const [flights, setFlights] = React.useState([]);\n  const [companies, setCompanies] = React.useState([]);\n  const [filteredFlights, setFilteredFlights] = React.useState([]);\n  const [counter, setCounter] = React.useState(2);\n  const maxLength = flights.length;\n\n  const [filterInit, setFilterInit] = React.useState({\n    priceFrom: 0,\n    priceTo: 0,\n    transfers: 0,\n  })\n\n  const [filter, setFilter] = React.useState({\n    priceFrom: 0,\n    priceTo: 0,\n    aviaList: [],\n    transfers: 0,\n  });\n\n  React.useEffect(() => {\n    const filterObj = { ...filter, ...filterInit}\n    setFilter(filterObj);\n  }, [filterInit]);\n\n  React.useEffect(() => {\n    filterChange(filter);\n  }, [filter]);\n\n  React.useEffect(() => {\n    document.title = \"Tickets Database\";\n  }, []);\n\n  React.useEffect(() => {\n    setFlights(flightsMock.result.flights);\n    setFilteredFlights(flightsMock.result.flights);\n  }, []);\n\n  React.useEffect(() => {\n    const aviaCompanyList = [];\n    flights.forEach((allFlights) => {\n      if (\n        !aviaCompanyList.find(\n          (item) => item === allFlights.flight.carrier.caption\n        )\n      ) {\n        aviaCompanyList.push(allFlights.flight.carrier.caption);\n      }\n    });\n    setCompanies(aviaCompanyList);\n  }, [flights]);\n\n  React.useEffect(() => {\n    const allTranfers = flights.flatMap(flight => \n      flight.flight.legs.map(leg => leg.segments.length)\n    );\n    const allPrices = flights.map(flight => \n      flight.flight.price.total.amount\n    );\n    const filterObj = { ...filter,\n      priceFrom: Math.min.apply(Math, allPrices),\n      priceTo: Math.max.apply(Math, allPrices),\n      transfers: Math.max.apply(Math, allTranfers) -1\n    };\n    setFilterInit(filterObj);\n  }, [flights]);\n\n  const plusCounter = () => {\n    const newCounter = Math.min(maxLength, counter + 2);\n    setCounter(newCounter);\n  };\n\n  const handleFilter = (key, value) => {\n    const filterObj = { ...filter, [key]: value };\n    setFilter(filterObj);\n  };\n\n  const handleTransfer = (key, value) => {\n    const filterObj = { ...filter, [key]: value };\n    setFilter(filterObj);\n  };\n\n  const handleSelectAvia = (name) => {\n    let filterAviaList = filter.aviaList;\n    if (filterAviaList.includes(name)) {\n      filterAviaList = filterAviaList.filter((item) => item !== name);\n    } else {\n      filterAviaList.push(name);\n    }\n    const filterObj = { ...filter, aviaList: filterAviaList };\n    setFilter(filterObj);\n  };\n\n  const filterChange = (filter) => {\n    let newArr = flights;\n    if (filter.priceFrom !== \"\") {\n      newArr = newArr.filter(item => +item.flight.price.total.amount > +filter.priceFrom);\n    }\n    if (filter.priceTo !== \"\") {\n      newArr = newArr.filter(item => +item.flight.price.total.amount < +filter.priceTo);\n    }\n    if (filter.aviaList.length !== 0) {\n      newArr = newArr.filter(item =>\n        filter.aviaList.includes(item.flight.carrier.caption)\n      );\n    }\n    if (filter.transfers !== false || filter.transfers !== \"undefined\" || filter.transfers !== '') {\n      newArr = newArr.filter(item =>\n          item.flight.legs.every(leg =>\n            leg.segments.length === filter.transfers + 1\n          )\n      );\n    }\n    setFilteredFlights(newArr);\n  };\n\n  const handleHighSort = () => {\n    const toHighPrice = [...flights].sort((prev, next) => {\n      return +prev.flight.price.total.amount - +next.flight.price.total.amount;\n    });\n    setFilteredFlights(toHighPrice);\n  };\n\n  const hadleLowSort = () => {\n    const toLowPrice = [...flights].sort((prev, next) => {\n      return +next.flight.price.total.amount - +prev.flight.price.total.amount;\n    });\n    setFilteredFlights(toLowPrice);\n  };\n\n  const handleFlyTimeSort = () => {\n    const timeInFly = [...flights].sort((prev, next) => {\n      return (\n        prev.flight.legs.reduce((a, b) => a + b.duration, 0) -\n        next.flight.legs.reduce((a, b) => a + b.duration, 0)\n      );\n    });\n    setFilteredFlights(timeInFly);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\"></header>\n      <main className=\"main-content\">\n        <SearchPanel \n          companies={companies}\n          hadleLowSort={hadleLowSort}\n          handleHighSort={handleHighSort}\n          handleFlyTimeSort={handleFlyTimeSort}\n          handleTransfer={handleTransfer}\n          filter={filter}\n          handleFilter={handleFilter}\n          handleSelectAvia={handleSelectAvia}\n          filterInit={filterInit}\n        />\n        <SearchResult\n          filteredFlights={filteredFlights}\n          counter={counter}\n          maxLength={maxLength}\n          plusCounter={plusCounter}\n        />\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","C:\\Users\\Maxim\\Desktop\\GitHub\\flights\\src\\reportWebVitals.js",[],[],"C:\\Users\\Maxim\\Desktop\\GitHub\\flights\\src\\SearchPanel\\SearchPanel.js",[],[],"C:\\Users\\Maxim\\Desktop\\GitHub\\flights\\src\\SearchResult\\SearchResult.js",[],[],{"ruleId":"31","severity":1,"message":"32","line":36,"column":6,"nodeType":"33","endLine":36,"endColumn":18,"suggestions":"34"},{"ruleId":"31","severity":1,"message":"35","line":40,"column":6,"nodeType":"33","endLine":40,"endColumn":14,"suggestions":"36"},{"ruleId":"31","severity":1,"message":"32","line":78,"column":6,"nodeType":"33","endLine":78,"endColumn":15,"suggestions":"37"},"react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'filter'. Either include it or remove the dependency array.","ArrayExpression",["38"],"React Hook React.useEffect has a missing dependency: 'filterChange'. Either include it or remove the dependency array.",["39"],["40"],{"desc":"41","fix":"42"},{"desc":"43","fix":"44"},{"desc":"45","fix":"46"},"Update the dependencies array to be: [filter, filterInit]",{"range":"47","text":"48"},"Update the dependencies array to be: [filter, filterChange]",{"range":"49","text":"50"},"Update the dependencies array to be: [filter, flights]",{"range":"51","text":"52"},[902,914],"[filter, filterInit]",[975,983],"[filter, filterChange]",[2014,2023],"[filter, flights]"]